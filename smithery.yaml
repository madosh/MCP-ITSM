version: "1.0"

name: mcp-itsm
description: Model Context Protocol for ITSM

build:
  dockerfile: Dockerfile
  context: .

run:
  command: ["npm", "start"]
  port: 5000
  env:
    - name: NODE_ENV
      value: production
    - name: PORT
      value: "5000"
    - name: MONGODB_URI
      secret: mongodb-uri
    - name: JWT_SECRET
      secret: jwt-secret

resources:
  cpu: 0.5
  memory: 512Mi

scale:
  min: 1
  max: 3
  target_cpu_percentage: 80

health:
  path: /health
  port: 5000
  initialDelaySeconds: 10
  periodSeconds: 30
  timeoutSeconds: 5
  successThreshold: 1
  failureThreshold: 3 